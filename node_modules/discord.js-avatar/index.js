const { MessageEmbed } = require('discord.js');

const avatarEmbed = (message, language = 'english') => {

    if (!message && !message.channel)
        throw new Error(`The channel is inaccessible.`);

    const validLangs = [
        "english",
        "spanish"
    ];

    if (!validLangs.includes(language))
        throw new Error(`Invalid language. [${language}]`);
        
    const currentLang = require(`./Languages/${language}.json`);

    let target = message.mentions.users.first();

    if (!target)
        target = message.author;

    let avatarURL = target.displayAvatarURL({
        size: 4096,
        dynamic: true
    });

    const embedTitle = currentLang.AVATAR_OF.replace('%user', target.username);
    const embedFooter = currentLang.ASKED_BY.replace('%user', message.author.tag);

    const Embed = new MessageEmbed()
        .setTitle(embedTitle)
        .setDescription(`[${currentLang.AVATAR_URL}](${avatarURL})`)
        .setColor('RANDOM')
        .setImage(avatarURL)
        .setFooter(embedFooter, `${message.author.displayAvatarURL({
            size: 4096,
            dynamic: true
        })}`);

    message.channel.send(Embed);
}

module.exports = avatarEmbed;